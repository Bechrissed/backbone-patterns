<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Settings test</title>


</head>
<body>
<div class="test" style="display: block; height: 100px; width: 100px; background: red"></div>
<script src="bower_components/jquery/jquery.js"></script>
<script src="bower_components/underscore/underscore.js"></script>
<script src="bower_components/backbone/backbone.js"></script>
<script src="dist/backbone-patterns.js"></script>
<script>

    (function () {


        var View = Backbone.View.extend({
            optionNames: ['test'],
            subscriptions: {
                'test': 'handleGlobalTest',
                'custom': {
                    'test': 'handleCustomTest'
                }
            },

            initialize: function () {
                this.setResponder('log', function () {
                    return 'hello';
                });

                this.channel('custom').setResponder('log', function () {
                    return 'world';
                })
            },

            handleGlobalTest: function (request) {
                console.log(this.request(request));
            },

            handleCustomTest: function (request) {
                console.log(this.channel('custom').request(request));
            }
        });

        var view = new View({
            el: '.test',
            test: 'lala'
        });
        Backbone.mediator.publish('test', 'log');
        Backbone.mediator.channel('custom').publish('test', 'log');
        view.remove();

    })();

</script>

</body>
</html>